const a63_0x3ccd3e=a63_0x42f5;(function(_0x4a7fa1,_0x40dafb){const _0x197d04=a63_0x42f5,_0x4f2ee5=_0x4a7fa1();while(!![]){try{const _0x1de52a=-parseInt(_0x197d04(0xaa))/0x1+-parseInt(_0x197d04(0xc5))/0x2*(parseInt(_0x197d04(0xac))/0x3)+-parseInt(_0x197d04(0xcb))/0x4*(parseInt(_0x197d04(0xa7))/0x5)+parseInt(_0x197d04(0xbb))/0x6+-parseInt(_0x197d04(0xa1))/0x7+parseInt(_0x197d04(0xd0))/0x8+parseInt(_0x197d04(0xb8))/0x9*(parseInt(_0x197d04(0xc3))/0xa);if(_0x1de52a===_0x40dafb)break;else _0x4f2ee5['push'](_0x4f2ee5['shift']());}catch(_0x17691d){_0x4f2ee5['push'](_0x4f2ee5['shift']());}}}(a63_0x8771,0xa2fe6));function a63_0x42f5(_0x23a1b3,_0x14f94b){const _0x1efa52=a63_0x8771();return a63_0x42f5=function(_0x165045,_0x345e4e){_0x165045=_0x165045-0x9e;let _0x877176=_0x1efa52[_0x165045];if(a63_0x42f5['ltoUlu']===undefined){var _0x42f57c=function(_0x18e218){const _0x3da498='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x253878='',_0xa502d0='',_0x237dd4=_0x253878+_0x42f57c;for(let _0x1f07fa=0x0,_0x351c81,_0x53780a,_0x237df8=0x0;_0x53780a=_0x18e218['charAt'](_0x237df8++);~_0x53780a&&(_0x351c81=_0x1f07fa%0x4?_0x351c81*0x40+_0x53780a:_0x53780a,_0x1f07fa++%0x4)?_0x253878+=_0x237dd4['charCodeAt'](_0x237df8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x351c81>>(-0x2*_0x1f07fa&0x6)):_0x1f07fa:0x0){_0x53780a=_0x3da498['indexOf'](_0x53780a);}for(let _0x2e9595=0x0,_0x116261=_0x253878['length'];_0x2e9595<_0x116261;_0x2e9595++){_0xa502d0+='%'+('00'+_0x253878['charCodeAt'](_0x2e9595)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xa502d0);};a63_0x42f5['eQZCVe']=_0x42f57c,_0x23a1b3=arguments,a63_0x42f5['ltoUlu']=!![];}const _0x504b0e=_0x1efa52[0x0],_0x11ebf5=_0x165045+_0x504b0e,_0x544227=_0x23a1b3[_0x11ebf5];if(!_0x544227){const _0x559594=function(_0x14d982){this['RNDMPx']=_0x14d982,this['vXHXiF']=[0x1,0x0,0x0],this['mGbaFT']=function(){return'newState';},this['kLCLQb']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['vYnSig']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x559594['prototype']['OTskWi']=function(){const _0x3e72e3=new RegExp(this['kLCLQb']+this['vYnSig']),_0x168d3b=_0x3e72e3['test'](this['mGbaFT']['toString']())?--this['vXHXiF'][0x1]:--this['vXHXiF'][0x0];return this['QmaEwd'](_0x168d3b);},_0x559594['prototype']['QmaEwd']=function(_0x5e09fb){if(!Boolean(~_0x5e09fb))return _0x5e09fb;return this['bEYyne'](this['RNDMPx']);},_0x559594['prototype']['bEYyne']=function(_0x35a23f){for(let _0x2f054e=0x0,_0x56fa06=this['vXHXiF']['length'];_0x2f054e<_0x56fa06;_0x2f054e++){this['vXHXiF']['push'](Math['round'](Math['random']())),_0x56fa06=this['vXHXiF']['length'];}return _0x35a23f(this['vXHXiF'][0x0]);},new _0x559594(a63_0x42f5)['OTskWi'](),_0x877176=a63_0x42f5['eQZCVe'](_0x877176),_0x23a1b3[_0x11ebf5]=_0x877176;}else _0x877176=_0x544227;return _0x877176;},a63_0x42f5(_0x23a1b3,_0x14f94b);}const a63_0x345e4e=(function(){let _0x5c7cb3=!![];return function(_0x22edfb,_0x2ad919){const _0xedaf9b=_0x5c7cb3?function(){const _0x25377d=a63_0x42f5;if(_0x2ad919){if('lnxyn'!=='WNlMu'){const _0x35a88a=_0x2ad919['apply'](_0x22edfb,arguments);return _0x2ad919=null,_0x35a88a;}else return _0x32162f(_0x4f3ff6+_0x25377d(0xc1));}}:function(){};return _0x5c7cb3=![],_0xedaf9b;};}()),a63_0x165045=a63_0x345e4e(this,function(){const _0x58db66=a63_0x42f5;return a63_0x165045['toString']()[_0x58db66(0xa5)]('(((.+)+)+)+$')['toString']()['constructor'](a63_0x165045)[_0x58db66(0xa5)]('(((.+)+)+)+$');});function a63_0x8771(){const _0x5981b=['iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','zuftEeW','AM9PBG','z2v0','zgvSzxrL','cIaGicaGicaGicbjtLnfuLqGsu5utYa','Bg9N','ihvWzgf0zwqGD2L0AcbHy3rPB24G','zxjYB3i','ihDPDgGGywn0Aw9Uia','zw5HyMXLza','mty1oti3m0jRs2rrDG','q0z3quS','yxbWBhK','vNHJqMi','C2vHCMnO','vw5LigvYCMv1CIbLC3qGC3vYDMvUDwuGlcb2zwLSBgv6ig5VDxmGzw4GAw5MB3jTzxOGC3vYigXLigzVCNvTihnPihbLCMnPC3rHBNq','ntm5mZy1q2r2EgrQ','CMv0AxjLCG','idOGCg91CIbSzsbKzxnHy3rPDMvYcG','oteYndmXD2LiuMDx','ChjLCgfYzq','mtvqt1rsyum','igvZDcbTywLUDgvUyw50igfJDgLM','whvOzvO','ig4Nzxn0ihbHCYb2ywXPzguUieXLCYbHy3rPB25ZihzHBgLKzxmGC29UDdOG','C3f0AKe','CMvTB3zL','ELzLqxy','idOGCg91CIbJAgfUz2vYigWNywn0Aw9UigvUia','CNvU','ChrnBxG','rxjYB3iGC2v0DgLUzYa','z2vUzxjHDgvdBwq','ntq5yLzrz05L','u0fzu1q','idOGCg91CIbSj2fJDgL2zxik','ntm3ndaZmM1kq3PLqW','BM9U','u0vmrunuigv0yxqGrLjptsa','Dg9tDhjPBMC','uxjkvvO','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','igvZDcbKzwPHigfJDgLM','DMfSDwvZ','mJK5nJmWzhzNz1Pr','zgLZywjSzwq','ndu5nZm2u0n1B29z','Dg9mB3DLCKnHC2u','sMLKia','CwziywG','rMHUsxy','ywn0Aw9U','neTKzNfZvG','qunusu9ouW','cIaGicaGicaGq1jfqvrfifrbqKXfieLgie5pvcbfweLtvfmG','igvZDcbKzwPHigrLC2fJDgL2zq','DezorLK','mJGWnZeYmfPPsefNCW','q2v0DguGy29TBwfUzguGzxn0ihjLC2vYDMvYihvUAxf1zw1LBNqGCg91CIbSzxmGz3jVDxbLCW','lI4VlI4VyMrKl19PBMrLEa','Eg1mtfG','vM91CYbUj2f2zxOGCgfZigXLCYbWzxjTAxnZAw9UCYbUzwnLC3nHAxjLCW','BM9Kzs1JywnOzq','C3rHCNrZv2L0Aa','ifDirvjfigPPzca9id87','igfJDgLVBI8','v3jus0K','DhjPBq','rxjYB3iGy2HLy2TPBMCGzw5HyMXLzcbZDgf0zsbMB3iGAMLKia','C2v0','D2fYBG','kcGOlISPkYKRksSK','tcDHy3rPB24G','B3vP','zxrHDa','CKzUseW','u1rbvevt','zw5HyMXLzezVCKPPza'];a63_0x8771=function(){return _0x5981b;};return a63_0x8771();}a63_0x165045();const NodeCache=require(a63_0x3ccd3e(0xd5)),initializeDb=require(a63_0x3ccd3e(0xd2)),{zokou}=require('../zokou');class EventStateManager{#tableName;#db=initializeDb();['STATES']={'enabled':a63_0x3ccd3e(0xe0),'disabled':a63_0x3ccd3e(0xbc)};[a63_0x3ccd3e(0xcc)]={'remove':a63_0x3ccd3e(0xa8),'delete':'supp','warn':a63_0x3ccd3e(0xdd)};#defaultAction=this['ACTIONS']['remove'];#defaultState=this['STATES'][a63_0x3ccd3e(0xc4)];#cache;constructor(_0x3fc67d,_0x128201=new NodeCache()){this.#tableName=_0x3fc67d,this.#cache=_0x128201,this.#createTable();}#createTable(){const _0x4ab938=a63_0x3ccd3e;this.#db['prepare'](_0x4ab938(0xcd)+this.#tableName+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20NOT\x20NULL\x20DEFAULT\x20\x22'+this.#defaultState+_0x4ab938(0xe5)+this.#defaultAction+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20)\x0a\x20\x20\x20\x20\x20\x20')[_0x4ab938(0xb4)]();}#addOrUpdateJid(_0x94c4c2,_0x1ab218=this.#defaultState){const _0x19ffbf=a63_0x3ccd3e;this.#db[_0x19ffbf(0xab)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+'\x20(jid,\x20etat)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20etat\x20=\x20excluded.etat;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x19ffbf(0xb4)](_0x94c4c2,_0x1ab218);const _0x23c8f3=this.#cache[_0x19ffbf(0xe8)](_0x94c4c2)||{};this.#cache['set'](_0x94c4c2,{..._0x23c8f3,'etat':_0x1ab218});}#updateJidAction(_0x4dc4d6,_0x5165e5=this.#defaultAction){const _0x48b551=a63_0x3ccd3e,_0x48c8d1={'XqJQv':_0x48b551(0xb9)};try{if(_0x48c8d1['XqJQv']===_0x48b551(0xb9)){this.#db[_0x48b551(0xab)](_0x48b551(0xea)+this.#tableName+'\x20(jid,\x20action)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20action\x20=\x20excluded.action;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x48b551(0xb4)](_0x4dc4d6,_0x5165e5);const _0x15bbd9=this.#cache[_0x48b551(0xe8)](_0x4dc4d6)||{};this.#cache['set'](_0x4dc4d6,{..._0x15bbd9,'action':_0x5165e5}),console[_0x48b551(0xeb)](_0x48b551(0xc7)+_0x4dc4d6+_0x48b551(0xec)+_0x5165e5);}else{_0x1f94e0[_0x48b551(0x9e)]('Error\x20updating\x20jid\x20'+_0xc8a350+_0x48b551(0x9f)+_0x2212c9+':',_0x4c9602);throw _0x23d799;}}catch(_0x115fef){console['error']('Error\x20updating\x20jid\x20'+_0x4dc4d6+'\x20with\x20action\x20'+_0x5165e5+':',_0x115fef);throw _0x115fef;}}[a63_0x3ccd3e(0xe4)](_0x4b3ef7){const _0x43603f=a63_0x3ccd3e,_0x2cd9c8={'fuCpL':function(_0x1c4487,_0xe04ba8){return _0x1c4487===_0xe04ba8;},'VxcBb':function(_0x48f53d,_0x4ded30){return _0x48f53d!==_0x4ded30;}};try{const _0x4dc652=this.#cache[_0x43603f(0xe8)](_0x4b3ef7);if(_0x4dc652?.[_0x43603f(0xe1)]!==undefined)return _0x2cd9c8['fuCpL'](_0x43603f(0xcf),'tFNFY')?_0x2cd9c8[_0x43603f(0xa4)](_0x4dc652[_0x43603f(0xe1)],this.#defaultState):_0x1277f6(_0x43e7ed);const _0x89cf24=this.#db['prepare'](_0x43603f(0xbd)+this.#tableName+'\x20WHERE\x20jid\x20=\x20?;')['get'](_0x4b3ef7);if(_0x89cf24)return this.#cache[_0x43603f(0xdc)](_0x4b3ef7,{...this.#cache[_0x43603f(0xe8)](_0x4b3ef7)||{},'etat':_0x89cf24['etat']}),_0x89cf24[_0x43603f(0xe1)]!==this.#defaultState;return![];}catch(_0x5e69d0){return console['error'](_0x43603f(0xdb)+_0x4b3ef7+':',_0x5e69d0),![];}}['getActionForJid'](_0x5f0a5b){const _0xea98df=a63_0x3ccd3e,_0x41ccc1={'HVDMg':_0xea98df(0xbf),'uGQLN':_0xea98df(0xb2),'ALrXh':_0xea98df(0xe6)};try{if(_0xea98df(0xbf)!==_0x41ccc1['HVDMg']){const _0x195e9f=_0x2e9595?function(){if(_0x5e09fb){const _0x3d6d79=_0x588695['apply'](_0x5300e0,arguments);return _0x4a714b=null,_0x3d6d79;}}:function(){};return _0x168d3b=![],_0x195e9f;}else{const _0x490b38=this.#cache['get'](_0x5f0a5b);if(_0x490b38?.['action'])return _0x490b38[_0xea98df(0xca)];const _0x53a7b3=this.#db[_0xea98df(0xab)]('SELECT\x20action\x20FROM\x20'+this.#tableName+_0xea98df(0xd7))['get'](_0x5f0a5b);if(_0x53a7b3)return this.#cache[_0xea98df(0xdc)](_0x5f0a5b,{...this.#cache['get'](_0x5f0a5b)||{},'action':_0x53a7b3[_0xea98df(0xca)]}),_0x53a7b3[_0xea98df(0xca)];return this.#defaultAction;}}catch(_0x371109){if(_0x41ccc1['uGQLN']!==_0x41ccc1['ALrXh']){console['error'](_0xea98df(0xc0)+_0x5f0a5b+':',_0x371109);throw _0x371109;}else return _0x3b56ba(_0x1324f9+_0xea98df(0xce));}}[a63_0x3ccd3e(0xb7)](_0x248e13){const _0x512b3a=a63_0x3ccd3e,_0x4a4310={'XuheZ':function(_0x9ab936,_0x229bce){return _0x9ab936(_0x229bce);},'dLsJe':_0x512b3a(0xd4),'qfHah':'XdyCR','YKyGS':function(_0x2a2752,_0x49ab59){return _0x2a2752&&_0x49ab59;},'sqtjA':function(_0x4bf0f4,_0x23fbd4){return _0x4bf0f4==_0x23fbd4;},'GvVGp':_0x512b3a(0xc9),'hTofw':'EONwF','JZiJs':'action/','CFwAK':'zWaJm','WrTKI':function(_0x4e9a49,_0x4b3243){return _0x4e9a49(_0x4b3243);},'dqJBU':function(_0x29ff6f,_0x106a01){return _0x29ff6f(_0x106a01);}},{nomCom:_0x87c5f8,categorie:_0x216fcb,desc:_0x2dcef7,alias:_0x3567a4,reaction:_0x1febb4}=_0x248e13;zokou({'nomCom':_0x87c5f8,'categorie':_0x216fcb,'reaction':_0x1febb4,'desc':_0x2dcef7,'alias':_0x3567a4},async(_0x26479c,_0x4fad28,_0x38c9ba)=>{const _0x185c08=_0x512b3a,_0x4073a0={'xmLLX':function(_0x2f7d43,_0x16d9af){return _0x2f7d43(_0x16d9af);},'mrzyJ':'(((.+)+)+)+$'};if(_0x4a4310[_0x185c08(0xc8)]!=='XdyCR')return _0x4d920c[_0x185c08(0xeb)](_0x185c08(0xb6)+_0x7ef308+'\x20for\x20jid\x20'+_0xccaafa+':\x20'+_0x5893f9),_0x4a4310[_0x185c08(0xae)](_0x50f4d0,_0x185c08(0xa6));else{const {verifGroupe:_0x1732c1,verifAdmin:_0x48664b,ms:_0x38c2a5,arg:_0x1fb831,superUser:_0x43934b,repondre:_0x5a013c}=_0x38c9ba;if(!_0x1732c1)return _0x4a4310[_0x185c08(0xae)](_0x5a013c,_0x185c08(0xd1));if(_0x4a4310['YKyGS'](!_0x43934b,!_0x48664b))return _0x5a013c(_0x185c08(0xd4));try{const _0x23503f='\x0a'+_0x87c5f8+'\x20'+this['STATES'][_0x185c08(0xa0)]+_0x185c08(0xba)+_0x87c5f8+'\x20'+this['STATES']['disabled']+_0x185c08(0xa9)+_0x87c5f8+'\x20action/'+this[_0x185c08(0xcc)]['remove']+'\x20:\x20pour\x20changer\x20l\x27action\x20en\x20'+this[_0x185c08(0xcc)][_0x185c08(0xb1)]+'\x0a'+_0x87c5f8+_0x185c08(0xd8)+this[_0x185c08(0xcc)][_0x185c08(0xe9)]+'\x20:\x20pour\x20changer\x20l\x27action\x20en\x20'+this[_0x185c08(0xcc)][_0x185c08(0xb1)]+'\x0a'+_0x87c5f8+'\x20action/'+this[_0x185c08(0xcc)]['warn']+_0x185c08(0xb3)+this['ACTIONS'][_0x185c08(0xb1)]+'\x0a'+_0x87c5f8+'\x20'+this['ACTIONS'][_0x185c08(0xb1)]+'\x20'+this[_0x185c08(0xe3)][_0x185c08(0xa0)]+'\x20:\x20pour\x20activer\x20et\x20changer\x20l\x27action\x20en\x20retirer';if(!_0x1fb831||!_0x1fb831[0x0]||_0x1fb831[_0x185c08(0xe7)]('')[_0x185c08(0xda)]()=='')return _0x5a013c(_0x23503f);const _0x47d722=_0x1fb831[0x0]['toLowerCase']();if(_0x4a4310[_0x185c08(0xb0)](_0x47d722,this['STATES']['enabled'])){if(_0x185c08(0xc9)===_0x4a4310['GvVGp']){if(this[_0x185c08(0xe4)](_0x26479c))return _0x5a013c(_0x87c5f8+_0x185c08(0xc1));return this.#addOrUpdateJid(_0x26479c,_0x47d722),_0x4a4310['XuheZ'](_0x5a013c,_0x87c5f8+_0x185c08(0xad));}else{const _0xeff48c=_0x43898a[_0x185c08(0xa3)](_0x3d49d1,arguments);return _0x59a39b=null,_0xeff48c;}}else{if(_0x47d722==this['STATES'][_0x185c08(0xc4)]){if(!this[_0x185c08(0xe4)](_0x26479c))return'EONwF'!==_0x4a4310['hTofw']?_0x4073a0[_0x185c08(0xd3)](_0x2d5d94,_0x185c08(0xdf)+_0x12bcce+'\x20n\x27est\x20pas\x20valide.\x20Les\x20actions\x20valides\x20sont:\x20'+_0x581092['values'](this['ACTIONS'])[_0x185c08(0xe7)](',\x20')):_0x4a4310['XuheZ'](_0x5a013c,_0x87c5f8+'\x20est\x20deja\x20desactive');return this.#addOrUpdateJid(_0x26479c,_0x47d722),_0x5a013c(_0x87c5f8+'\x20est\x20maintenant\x20desactive');}else{if(_0x47d722[_0x185c08(0xd6)](_0x4a4310['JZiJs'])){const _0x342584=_0x47d722['split']('/')[0x1]['trim']()[_0x185c08(0xc6)]();if(!Object[_0x185c08(0xc2)](this[_0x185c08(0xcc)])['includes'](_0x342584))return _0x185c08(0xe2)!==_0x4a4310[_0x185c08(0xa2)]?_0x5a013c('L\x27action\x20'+_0x342584+_0x185c08(0xaf)+Object['values'](this['ACTIONS'])[_0x185c08(0xe7)](',\x20')):_0x584471['toString']()[_0x185c08(0xa5)](MLqnZj['mrzyJ'])[_0x185c08(0xbe)]()['constructor'](_0x3befc0)['search'](_0x185c08(0xde));return this.#updateJidAction(_0x26479c,_0x342584),_0x4a4310[_0x185c08(0xd9)](_0x5a013c,'L\x27action\x20de\x20'+_0x87c5f8+'\x20est\x20maintenant\x20'+_0x342584);}else return _0x4a4310['dqJBU'](_0x5a013c,_0x23503f);}}}catch(_0x73c7fc){return'qGDTz'===_0x185c08(0xb5)?_0x402671(_0x4a4310['dLsJe']):(console[_0x185c08(0xeb)](_0x185c08(0xb6)+_0x87c5f8+'\x20for\x20jid\x20'+_0x26479c+':\x20'+_0x73c7fc),_0x5a013c('Une\x20erreur\x20est\x20survenue\x20,\x20veillez\x20nous\x20en\x20informez\x20sur\x20le\x20forum\x20si\x20percistant'));}}});}}module['exports']=EventStateManager;