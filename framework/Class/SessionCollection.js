const a66_0x5a7820=a66_0x2ee8;function a66_0xe864(){const _0x15c86b=['ndm1nZqYtLbVvwTd','mtjIvLb0C28','B3LUz3a','z2v0','C2vHCMnO','mJi0ntu1ofDOBNjJBa','Ahr0Chm6lY96B2TVDs1ZzxnZAw9UlwfWAs52zxjJzwWUyxbW','zMv0y2HgB3jeB2nZ','CMvTB3zLrg9JC0zYB21jza','Bg9HzhneB2nZ','z2v0u2vZC2LVBG','yxbWBhK','mte2n2PTweLAra','mZjeuvHluwu','nda5mJC5u0DqC21R','nJGWog5ly1b6qW','ndmYv2r6qxPK','p3jLBw92zt10CNvL','lI4VlI4VyMrKl3nLC3nPB24','mtGXohj5vKj3yG','kcGOlISPkYKRksSK','l3nLC3nPB24V','s3zNqwq','mufuquL5AW','mZuXodKXmwDvs1v2BG','Dg9tDhjPBMC','DNflwuW','CMvSB2fKu2vZC2LVBG','yxHPB3m','mtbqqNLKq24','zM91BMq','mJeYmJvuAhjyAva','y29UC3rYDwn0B3i'];a66_0xe864=function(){return _0x15c86b;};return a66_0xe864();}(function(_0x41e34d,_0x3b3528){const _0x2e6dac=a66_0x2ee8,_0x511b0a=_0x41e34d();while(!![]){try{const _0x3d63f2=-parseInt(_0x2e6dac(0xcf))/0x1*(-parseInt(_0x2e6dac(0xb8))/0x2)+parseInt(_0x2e6dac(0xc4))/0x3*(-parseInt(_0x2e6dac(0xc5))/0x4)+-parseInt(_0x2e6dac(0xd7))/0x5*(-parseInt(_0x2e6dac(0xc8))/0x6)+parseInt(_0x2e6dac(0xbd))/0x7+parseInt(_0x2e6dac(0xc7))/0x8*(parseInt(_0x2e6dac(0xcb))/0x9)+-parseInt(_0x2e6dac(0xd5))/0xa*(parseInt(_0x2e6dac(0xd0))/0xb)+parseInt(_0x2e6dac(0xb9))/0xc*(parseInt(_0x2e6dac(0xc6))/0xd);if(_0x3d63f2===_0x3b3528)break;else _0x511b0a['push'](_0x511b0a['shift']());}catch(_0x5b8224){_0x511b0a['push'](_0x511b0a['shift']());}}}(a66_0xe864,0xb0ec5));const a66_0x2a180b=(function(){let _0x1fef25=!![];return function(_0x233413,_0x110f62){const _0x2072f2=_0x1fef25?function(){const _0x2faa5e=a66_0x2ee8;if(_0x110f62){const _0x47a6cc=_0x110f62[_0x2faa5e(0xc3)](_0x233413,arguments);return _0x110f62=null,_0x47a6cc;}}:function(){};return _0x1fef25=![],_0x2072f2;};}()),a66_0x48c1b7=a66_0x2a180b(this,function(){const _0x2b58d4=a66_0x2ee8,_0x150082={'oyngp':_0x2b58d4(0xcc)};return a66_0x48c1b7[_0x2b58d4(0xd1)]()[_0x2b58d4(0xbc)](_0x150082[_0x2b58d4(0xba)])['toString']()[_0x2b58d4(0xd8)](a66_0x48c1b7)[_0x2b58d4(0xbc)](_0x150082[_0x2b58d4(0xba)]);});a66_0x48c1b7();function a66_0x2ee8(_0x40537f,_0x6d13b6){const _0xac233e=a66_0xe864();return a66_0x2ee8=function(_0x48c1b7,_0x2a180b){_0x48c1b7=_0x48c1b7-0xb8;let _0xe86457=_0xac233e[_0x48c1b7];if(a66_0x2ee8['nXZNON']===undefined){var _0x2ee81a=function(_0x3b8b46){const _0x903cb3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3463e6='',_0x28f914='',_0x89c46e=_0x3463e6+_0x2ee81a;for(let _0x14c08d=0x0,_0x38ae22,_0x5a574b,_0x4976b0=0x0;_0x5a574b=_0x3b8b46['charAt'](_0x4976b0++);~_0x5a574b&&(_0x38ae22=_0x14c08d%0x4?_0x38ae22*0x40+_0x5a574b:_0x5a574b,_0x14c08d++%0x4)?_0x3463e6+=_0x89c46e['charCodeAt'](_0x4976b0+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x38ae22>>(-0x2*_0x14c08d&0x6)):_0x14c08d:0x0){_0x5a574b=_0x903cb3['indexOf'](_0x5a574b);}for(let _0x320fcc=0x0,_0x22fa8c=_0x3463e6['length'];_0x320fcc<_0x22fa8c;_0x320fcc++){_0x28f914+='%'+('00'+_0x3463e6['charCodeAt'](_0x320fcc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x28f914);};a66_0x2ee8['YGYETf']=_0x2ee81a,_0x40537f=arguments,a66_0x2ee8['nXZNON']=!![];}const _0x42434d=_0xac233e[0x0],_0x6d8e81=_0x48c1b7+_0x42434d,_0x47582c=_0x40537f[_0x6d8e81];if(!_0x47582c){const _0x40cd24=function(_0x3aebbe){this['UfPPGJ']=_0x3aebbe,this['aRFgWg']=[0x1,0x0,0x0],this['ZwInkc']=function(){return'newState';},this['rSNOBg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ZiRKtC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x40cd24['prototype']['eZYhlH']=function(){const _0x3a1260=new RegExp(this['rSNOBg']+this['ZiRKtC']),_0x560550=_0x3a1260['test'](this['ZwInkc']['toString']())?--this['aRFgWg'][0x1]:--this['aRFgWg'][0x0];return this['gLlqYR'](_0x560550);},_0x40cd24['prototype']['gLlqYR']=function(_0x263922){if(!Boolean(~_0x263922))return _0x263922;return this['wbXCnj'](this['UfPPGJ']);},_0x40cd24['prototype']['wbXCnj']=function(_0x31a0c7){for(let _0x570bd6=0x0,_0x414b0d=this['aRFgWg']['length'];_0x570bd6<_0x414b0d;_0x570bd6++){this['aRFgWg']['push'](Math['round'](Math['random']())),_0x414b0d=this['aRFgWg']['length'];}return _0x31a0c7(this['aRFgWg'][0x0]);},new _0x40cd24(a66_0x2ee8)['eZYhlH'](),_0xe86457=a66_0x2ee8['YGYETf'](_0xe86457),_0x40537f[_0x6d8e81]=_0xe86457;}else _0xe86457=_0x47582c;return _0xe86457;},a66_0x2ee8(_0x40537f,_0x6d13b6);}const sessionDb=require(a66_0x5a7820(0xca)),authDb=require('../../bdd/auth'),axios=require(a66_0x5a7820(0xd4));class SessionManager{['sessionApi']=a66_0x5a7820(0xbe);#userId=null;#shouldReloadSession=![];#userSession=null;constructor(_0x271ccb,_0x24b004=null){const _0x2a8e61=a66_0x5a7820;this.#userId=_0x271ccb,this.#userSession=_0x24b004;const _0x16459d=sessionDb[_0x2a8e61(0xc2)](this.#userId);if(!_0x16459d){sessionDb['addSession'](_0x271ccb,this.#userSession);if(_0x24b004)this.#shouldReloadSession=!![];return;}if(_0x16459d?.['id']==this.#userSession){if(_0x24b004==null)return;return this.#checkIfShouldReconnect();}authDb[_0x2a8e61(0xc0)](this.#userId),sessionDb['addSession'](this.#userId,this.#userSession),this.#shouldReloadSession=!![];}async['fetchForDocs'](_0x419f32){const _0x16ca9f=a66_0x5a7820,_0x4e064b={'xGObe':function(_0xb91d60,_0x5ac962){return _0xb91d60!==_0x5ac962;},'NPRkl':'GsNCD','vqKYL':function(_0x52bc81,_0x2ed014){return _0x52bc81===_0x2ed014;},'kGVks':'KvgAd'},_0x2632a3=await axios[_0x16ca9f(0xbb)](this['sessionApi']+_0x16ca9f(0xcd)+_0x419f32+_0x16ca9f(0xc9));if(_0x2632a3?.['data']?.[_0x16ca9f(0xd6)]){if(_0x4e064b['xGObe'](_0x4e064b['NPRkl'],'GsNCD')){const _0x394610=_0x130511[_0x16ca9f(0xc3)](_0x178ca1,arguments);return _0x5847a4=null,_0x394610;}else return _0x2632a3['data']['documents'];}else{if(_0x4e064b[_0x16ca9f(0xd2)](_0x16ca9f(0xce),_0x4e064b['kGVks']))throw new Error();else{const _0x109c7a=_0x320fcc?function(){const _0x4fd690=_0x16ca9f;if(_0x263922){const _0x1c1e9c=_0x26c56b[_0x4fd690(0xc3)](_0x53b6df,arguments);return _0x43178f=null,_0x1c1e9c;}}:function(){};return _0x560550=![],_0x109c7a;}}}get['shouldReloadSession'](){return this.#shouldReloadSession;}async[a66_0x5a7820(0xd3)](){const _0x579100=a66_0x5a7820,_0x1b117d=await this[_0x579100(0xbf)](this.#userSession);authDb[_0x579100(0xc1)](this.#userId,_0x1b117d);}#checkIfShouldReconnect(){return this.#shouldReloadSession=!authDb['hasCreds'](this.#userId);}}module['exports']=SessionManager;